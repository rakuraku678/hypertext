#{extends 'main.html' /}
#{set title:'PaymentFlow' /}

#{set isAgencyHeader: false /}


<section class="bg-path">
    <article class="container-fluid">
        <div class="row">
            <ul class="general-path">
                <li>
                    <span class="circle-path icon-checked-path"></span>
                    <span class="name-path">búsqueda</span>
                </li>
                <li class="line-path">
                    <span class="circle-path bg-circle-path">2</span>
                    <span class="name-path">pasajeros</span>
                </li>
                <li>
                    <span class="circle-path">3</span>
                    <span class="name-path">pago</span>
                </li>
            </ul>
        </div>
    </article>
</section>
<section class="search-arrive payment-path">
    <form id="checkoutForm" action="@{PaymentFlowController.startPayment}" method="post">
        <article class="container-fluid">
            <div class="row">
                <h2>¿Quien Viaja?</h2>
                <p class="info-help">En caso de necesitar ayuda comunicarse al correo <strong>ventaonline@travelclub.cl</strong></p>
                <div class="col-md-8">
                    #{checkout.passengerBox passengerNumber: 1.1, passengerType: "ADT"/}
                    #{checkout.passengerBox passengerNumber: 2.1, passengerType: "ADT"/}
                    #{checkout.contactBox/}
                    #{checkout.paymentBox/}
                    #{checkout.termsConditionBox/}
                    #{checkout.hiddenInputBox bfmResultItem: bfmResultItem/}
                    <div class="col-md-12 text-right">

                        <input type="submit" class="btn btn-search" value="continuar">
                    </div>
                </div>
                <div class="col-md-4">
                    #{checkout.flightBox bfmResultItem:bfmResultItem/}
                    #{checkout.summaryBox pricing:bfmResultItem.pricing/}
                </div>
            </div>
        </article>
    </form>
</section>

#{set 'scriptFiles'}
#{get 'scriptFiles' /}
<script type="text/javascript" src="@{PaymentFlowController.javascript}"></script>

<script type="text/javascript">
    $(document).ready(function() {

        $('#checkoutForm input[type="submit"]').click(function() {

            $('#checkoutForm').bootstrapValidator({
                fields: {
                    validatesex: {
                        selector: '.validatesex',
                        validators: {
                            notEmpty: {
                                message: 'Este campo está vacio.'
                            }
                        }
                    },
                    validatefirstname: {
                        selector: '.validatefirstname',
                        validators: {
                            validMessage: 'Campo correcto',
                            notEmpty: {
                                message: 'El campo Nombre esta vacio.'
                            },
                            regexp: {
                                regexp: /^[a-zA-Z_áéíóúñ\s]*$/i,
                                message: 'Campo no válido'
                            }
                        }
                    },
                    validatelastname: {
                        selector: '.validatelastname',
                        validators: {
                            validMessage: 'Campo correcto',
                            notEmpty: {
                                message: 'El campo Apellido esta vacio.'
                            },
                            regexp: {
                                regexp: /^[a-zA-Z_áéíóúñ\s]*$/i,
                                message: 'Campo no válido'
                            }
                        }
                    },
                    validatedocument: {
                        selector: '.validatedocument',
                        validators: {
                            notEmpty: {
                                message: 'Tipo de documento esta vacio.'
                            }
                        }
                    },
                    validatedocumentnum: {
                        selector: '.validatedocumentnum',
                        validators: {
                            notEmpty: {
                                message: 'Este campo esta vacio.'
                            },
                            regexp: {
                                regexp: /^[0-9]$/i,
                                message: 'Campo no válido'
                            }
                        }
                    },
                    validatedate: {
                        selector: '.validatedate',
                        validators: {
                            notEmpty: {
                                message: 'El campo fecha de nacimiento está vacio.'
                            },
                            date: {
                                format: 'DD/MM/YYYY',
                                message: 'día/mes/año'
                            }
                        }
                    },
                    validateemail: {
                        selector: '.validateemail',
                        validators: {
                            notEmpty: {
                                message: 'El campo Email está vacio.'
                            },
                            regexp: {
                                regexp: /^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/i,
                                message: 'mail@ejemplo.com'
                            }
                        }
                    },
                    validatephone: {
                        selector: '.validatephone',
                        validators: {
                            notEmpty: {
                                message: 'El campo Teléfono está vacio.'
                            },
                            regexp: {
                                regexp: /^((\d{10})|(\d{13}))$/i,
                                message: 'Campo no válido'
                            }
                        }
                    },

                    validatetermsconditions: {
                        selector: '.validatetermsconditions',
                        validators: {
                            notEmpty: {
                                message: 'Debes aceptar terminos y condiciones para continuar.'
                            }
                        }
                    },
                    validatepay: {
                        selector: '.validatepay',
                        validators: {
                            notEmpty: {
                                message: 'Debes seleccionar una forma de pago.'
                            }
                        }
                    }
                }
            });


        });

    });  
</script>

#{/set}

#{modalNeadHelp /}
#{modalExpiredSession /}

#{set isAgencyFooter: false /}